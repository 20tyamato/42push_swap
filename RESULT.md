# RESULTS

## Command to run for 100

```bash
python3 push_swap_tester.py -l 100 -c 100
```

## RESULT 0

- 結果：基準値の700から程遠い

```bash
❯ python3 push_swap_tester.py -l 100 -c 100
Test 100 cases: arg_length=100 range=(-2147483648, 2147483647)
....................................................................................................
---- Result ----
max   : 1159
median: 916
min   : 590
See result.log for details
```

## RESULT 1 for 100

- `rev_rotate_sort_b(a, b);`を消す
- 結果：基準値の700からさらに遠くなった

```bash
❯ python3 push_swap_tester.py -l 100 -c 100
Test 100 cases: arg_length=100 range=(-2147483648, 2147483647)
....................................................................................................
---- Result ----
max   : 4017
median: 2435
min   : 621
See result.log for details
```

## RESULT 2 for 100 FINAL

- `forward_rotate_sort_a(a, b);`をループから外す
- 結果：基準値の700を下回った

```bash
❯ python3 push_swap_tester.py -l 100 -c 100
Test 100 cases: arg_length=100 range=(-2147483648, 2147483647)
....................................................................................................
---- Result ----
max   : 655
median: 611
min   : 552
See result.log for details
```

## RESULT 3 for 100

- `rev_rotate_sort_b(a, b);`を消す
- `forward_rotate_sort_a(a, b);`をループから外す
- 結果：基準値の700を下回ったが、`rev_rotate_sort_b(a, b);`があった方が早いし、エラーなし

```bash
❯ python3 push_swap_tester.py -l 100 -c 100
Test 100 cases: arg_length=100 range=(-2147483648, 2147483647)
...........................F.......................F...........................F....................
---- Result ----
max   : 681
median: 611
min   : 534
See result.log for details
```

## Command to run for 500

```bash
python3 push_swap_tester.py -l 500 -c 5
```

## RESULT 0 for 500

- 結果：基準値の5500から程遠い

```bash
❯ python3 push_swap_tester.py -l 500 -c 5
Test 5 cases: arg_length=500 range=(-2147483648, 2147483647)
.....
---- Result ----
max   : 8570
median: 7725
min   : 6972
See result.log for details
```

## RESULT 1 for 500 FINAL

- `forward_rotate_sort_a(a, b);`をループから外す
- 結果：基準値の5500に近づいたが、500もの手数を削減する必要がある

```bash
❯ python3 push_swap_tester.py -l 500 -c 5
Test 5 cases: arg_length=500 range=(-2147483648, 2147483647)
.....
---- Result ----
max   : 6078
median: 5917
min   : 5734
See result.log for details
```

## RESULT 2 for 500

- `sort_stack_of_three(a, b);`を`sort_stack_of_five(a, b);`に変更
- 結果：ほんの少しだけ改善

```bash
❯ python3 push_swap_tester.py -l 500 -c 5
Test 5 cases: arg_length=500 range=(-2147483648, 2147483647)
.....
---- Result ----
max   : 6046
median: 5883
min   : 5757
See result.log for details
```

## RESULT 3 for 500 and 100

- `merge_operations`をより最適化
  - A も B も forward 回転する
    - 実際の手数は max(ra, rb) になる (同時回転 rr を最小手数で使えるから)
      - なぜなら小さいほうは rr で同時回転、大きいほうは残りを ra or rb で単独回転するため、合計は「大きい方の回数」で済む
  - A も B も reverse 回転する
    - 実際の手数は max(rra, rrb) になる (同時回転 rrr を最小手数で使えるから)
  - A は forward 回転し、B は reverse 回転する
    - 同時回転できないので、実際の手数は ra + rrb
  - A は reverse 回転し、B は forward 回転する
    - 実際の手数は rra + rb
- 結果：かなり改善され、基準値を下回った
  - ただ、エラーケースが見つかった

```bash
❯ python3 push_swap_tester.py -l 500 -c 5
Test 5 cases: arg_length=500 range=(-2147483648, 2147483647)
.....
---- Result ----
max   : 5148
median: 5039
min   : 4858
See result.log for details
```

```bash
❯ python3 push_swap_tester.py -l 100 -c 100
Test 100 cases: arg_length=100 range=(-2147483648, 2147483647)
.......................F............................................................................
---- Result ----
max   : 603
median: 553
min   : 485
See result.log for details
```

```bash
Error
-798023730 -1950146360 825388524 1519303133 -363613245 -1168509576 -1440282991 168568471 33906543 -145791105 135685306 -1922661632 1108551610 1494529538 245323575 772059921 42449241 -896844182 -76326927 -613571801 -978402910 13037279 1159415782 1735572304 78480683 -1968121263 4309998 -1999687638 166556333 -755416235 -624340313 382821988 -468288510 -86539089 1731799233 1219186191 -63745271 -1202955679 -28657852 809360632 -1486688006 -966222897 101358033 746526522 601967841 1015353411 807113258 -1789573122 1036363240 1590651653 1277595121 -307395046 1419444597 -764266829 -336310050 2003463969 683163019 -430631844 1598184113 487737226 102429499 1520479842 -2046465583 420903528 -785846545 1865475781 1866780280 1233411208 -140486533 1682101068 2059843071 -746409856 740769636 -1271291877 2077209733 -2084668691 1050094599 -147560447 1720815685 -1004672082 454050562 658260896 504874242 -670879023 -775245028 -1346435735 113830104 845008626 -1816733682 -921560656 -1866354911 84643236 2140616588 38555265 1052460906 1662041013 1047987958 -21909955 1559562957 1661705333: 532
```

## RESULT 4 for 500 and 100 FINAL

- `sort_stack_of_five(a, b);`を`sort_stack_of_three(a, b);`に戻した
- 結果：回数は増えたが、エラーケースがなくなった

```bash
❯ python3 push_swap_tester.py -l 500 -c 5
Test 5 cases: arg_length=500 range=(-2147483648, 2147483647)
.....
---- Result ----
max   : 5304
median: 5042
min   : 4949
See result.log for details
```

```bash
❯ python3 push_swap_tester.py -l 100 -c 100
Test 100 cases: arg_length=100 range=(-2147483648, 2147483647)
....................................................................................................
---- Result ----
max   : 635
median: 560
min   : 490
See result.log for details
```

## ISSUE and CONCLUSION

- rev_rotate_sort_b(a, b);を消すと、結果が悪化する
- 後500手減らす必要がある
- 仮説
  - sort_threeからsort_fiveにしたことによって、処理は早くなった
  - sort_fiftyを使うことでもっと処理は早くなる？
    - 結論：ならない、sort_fiveは、スタック2つ使うから、エラーの原因

## FINAL SOLUTION

- 以下の手順で、最適化を行った
  - `forward_rotate_sort_a(a, b);`をループから外す
  - `merge_operations`を最適化

## FINAL CHECK

### 100

```bash
❯ python3 push_swap_tester.py -l 100 -c 100
Test 100 cases: arg_length=100 range=(-2147483648, 2147483647)
....................................................................................................
---- Result ----
max   : 624
median: 561
min   : 518
See result.log for details
```

```bash
❯ python3 push_swap_tester.py -l 100 -c 500
Test 500 cases: arg_length=100 range=(-2147483648, 2147483647)
....................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................
---- Result ----
max   : 622
median: 561
min   : 496
See result.log for details
```

```bash
❯ python3 push_swap_tester.py -l 100 -c 1000
Test 1000 cases: arg_length=100 range=(-2147483648, 2147483647)
........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................
---- Result ----
max   : 626
median: 559
min   : 502
See result.log for details
```

### 500

```bash
❯ python3 push_swap_tester.py -l 500 -c 5
Test 5 cases: arg_length=500 range=(-2147483648, 2147483647)
.....
---- Result ----
max   : 5278
median: 5084
min   : 4819
See result.log for details
```

```bash
❯ python3 push_swap_tester.py -l 500 -c 10
Test 10 cases: arg_length=500 range=(-2147483648, 2147483647)
..........
---- Result ----
max   : 5271
median: 5070
min   : 4918
See result.log for details
```
